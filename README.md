# 图形绘制软件

一个基于Windows GDI的简单图形绘制软件，实现了多种经典图形绘制算法。

## 功能特性

### 1. 基本图形绘制
- **直线**：支持三种算法
  - GDI直接绘制
  - 中点法（Midpoint Algorithm）
  - Bresenham算法
  
- **圆**：支持三种算法
  - GDI直接绘制
  - 中点法（Midpoint Circle Algorithm）
  - Bresenham圆算法
  
- **矩形**：通过两点确定矩形
- **多段线**：可连续点击多个点，右键完成
- **B样条曲线**：通过控制点绘制平滑曲线

### 2. 填充算法
- **扫描线填充**（Scan Line Fill）
- **栅栏填充**（Fence Fill）

## 使用说明

### 绘制直线
1. 点击菜单或工具栏中的直线绘制按钮（选择算法）
2. 在画布上点击鼠标左键确定起点
3. 移动鼠标到终点位置
4. 再次点击鼠标左键确定终点，完成绘制

### 绘制圆
1. 点击菜单或工具栏中的圆绘制按钮（选择算法）
2. 点击鼠标左键确定圆心
3. 移动鼠标调整半径
4. 再次点击鼠标左键确定半径，完成绘制

### 绘制矩形
1. 点击矩形绘制按钮
2. 点击鼠标左键确定第一个角点
3. 移动鼠标到对角位置
4. 再次点击鼠标左键完成绘制

### 绘制多段线
1. 点击多段线绘制按钮
2. 连续点击鼠标左键添加顶点
3. 点击鼠标右键完成绘制（自动闭合）

### 绘制B样条曲线
1. 点击B样条按钮
2. 连续点击鼠标左键添加控制点（至少4个）
3. 点击鼠标右键完成绘制

### 填充封闭区域
1. 先绘制一个封闭的多段线
2. 点击"扫描线填充"或"栅栏填充"按钮
3. 最后一个封闭图形将被填充

## 架构设计

### 低耦合设计
项目采用面向对象的设计方法，实现了良好的模块分离：

1. **Point.h** - 基础点类，表示二维坐标
2. **Shape.h** - 图形抽象基类和具体图形类
   - Shape（抽象基类）
   - Line（直线）
   - Circle（圆）
   - Rectangle（矩形）
   - Polyline（多段线）
   - BSpline（B样条曲线）
   - FilledRegion（填充区域）

3. **DrawingAlgorithm.h** - 绘制算法实现
   - 直线算法：GDI、中点法、Bresenham
   - 圆算法：GDI、中点法、Bresenham
   - 填充算法：扫描线法、栅栏填充法

4. **Canvas.h** - 画布管理类
   - 管理所有图形对象
   - 处理鼠标事件
   - 控制绘制模式

5. **MainWindow.cpp** - 主窗口和UI
   - 窗口管理
   - 菜单和工具栏
   - 消息循环

### 设计模式
- **策略模式**：不同的绘制算法可以互换
- **工厂模式**：根据绘制模式创建对应的图形对象
- **观察者模式**：鼠标事件触发画布更新

## 编译说明

### 使用MSVC编译
```cmd
cl /EHsc /std:c++17 /Fe:GraphicsApp.exe src\MainWindow.cpp user32.lib gdi32.lib comctl32.lib
```

### 使用g++编译
```cmd
g++ -std=c++17 -o GraphicsApp.exe src\MainWindow.cpp -lgdi32 -lcomctl32 -mwindows
```

## 技术要点

### 中点法直线
基于增量计算的直线生成算法，通过判断中点位置决定下一个像素。

### Bresenham直线
整数运算的直线生成算法，避免浮点运算，效率高。

### 中点圆算法
利用圆的八对称性，只需计算1/8圆弧，通过中点判断生成圆。

### 扫描线填充
计算多边形与每条扫描线的交点，对交点间区域进行填充。

### 栅栏填充
采用隔行扫描的方式填充多边形，可以产生特殊的视觉效果。

### B样条曲线
使用B样条基函数生成平滑曲线，支持局部控制特性。

## 项目结构
```
2/
├── src/
│   ├── Point.h              # 点类定义
│   ├── Shape.h              # 图形类定义
│   ├── DrawingAlgorithm.h   # 绘制算法实现
│   ├── Canvas.h             # 画布管理
│   └── MainWindow.cpp       # 主窗口和程序入口
├── build/                   # 编译输出目录
└── README.md               # 项目说明
```

## 注意事项

1. 项目使用Windows GDI API，仅支持Windows平台
2. 需要C++17或更高版本编译器
3. 双缓冲绘制避免闪烁
4. 鼠标右键用于完成多段线和B样条的绘制

## 扩展建议

1. 添加颜色选择功能
2. 添加线宽设置
3. 实现撤销/重做功能
4. 添加图形保存和加载功能
5. 支持更多图形类型（椭圆、多边形等）
6. 实现图形的选择、移动、缩放等编辑功能
